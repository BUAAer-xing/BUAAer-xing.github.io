# 04-Linux组管理和权限管理


## Linux组的基本介绍

在linux中，每个用户必须属于同一个组，不能独立于组外。

在linux中，每个文件有所有者、所在组、其它组的概念。

- 所有者
	- 一般为文件的创建者，谁创建了文件，就自然成为了该文件的所有者
- 所在组
- 其它组

![image.png|center|600](https://jsd.cdn.zzko.cn/gh/NEUQer-xing/Markdown_images@master/images-2/20230718122447.png)


## 文件/目录的所有者

- 查看文件的所有者
	- `ls -ahl`
- 修改文件所有者
	- `chown 用户名 文件名`

## 组的创建

- 创建组
	- `groupadd 组名`
- 创建一个用户，并放入monster组中 [[3-Linux 实操##用户组的添加和删除|用户组的相关操作]]
	- `useradd -g monster fox`

## 文件/目录所在的组

当某个用户创建了一个文件，那么这个文件的所在组就是该用户所在的组。

- 查看文件/目录所在的组
	- 通过指令`ls -ahl`可以查看文件/目录所在的组
- 修改文件/目录所在的组
	- `chgrp 组名 文件名`

## 其它组

除了文件的所有者和所在组的用户外，系统的其它用户都是文件的其它组

## 改变用户所在的组

用root的管理权限，可以改变某个用户的所在组。

- 改变用户所在的组
	- `usermod -g 新组名 用户名`
	- `usermod -d 目录名 用户名 改变该用户登陆的初始目录`
		- ❗️用户需要有进入到新目录的权限

## 权限的基本介绍

![image.png|center|600](https://jsd.cdn.zzko.cn/gh/NEUQer-xing/Markdown_images@master/images-2/20230718150415.png)

### 第0-9位说明

- **第0位**：确定文件的类型
	- `l` 是链接，相当于windows的快捷方式
	- `d` 是目录，相当于windows的文件夹
	- `c` 是字符设备文件，比如鼠标、键盘等
	- `b` 是块设备，比如硬盘
	- `-` 是普通文件，比如*.txt文件
- **第1-3位**：确定文件所有者对该文件的权限 **--User**
- **第4-6位**：确定所属组拥有该文件的权限 **-- Group**
- **第7-9位**：确定其它用户（其它组）拥有该文件的权限 **-- Other**

### rwx权限详解

##### rwx 修饰文件时

- 【**r**】： 代表可读（read）：可以对文件进行读取，查看
- 【**w**】：代表可写（write）：可以进行修改，但是不是代表可以删除该文件，**删除一个文件的前提条件是对该文件所在的目录有写权限**，才能删除该文件。
- 【**x**】：代表可执行（execute）：可以被执行

##### rwx修饰目录时

- 【**r**】： 代表可读（read）：可以对文件进行读取，ls查看目录内容
- 【**w**】：代表可写（write）：可以进行修改，对目录内的内容进行创建+删除或重命名目录
- 【**x**】：代表可执行（execute）：可以进入该目录

可以用数字进行表示：**r=4、w=2、x=1**，因此rwx=4+2+1=7。

其它说明：

![image.png|center|800](https://jsd.cdn.zzko.cn/gh/NEUQer-xing/Markdown_images@master/images-2/20230718182146.png)


### 修改权限

基本说明：通过`chmod`指令，可以修改文件或目录的权限

##### 第一种方式：+、-、= 变更权限

+、-、=的含义：

- + 表示增加权限
- -  表示取消权限
- = 表示唯一设定权限

u、g、o、a的含义：

- u ：所有者
- g ：所有组（所在组）
- o ：其它人
- a ：所有人

例如：

`chmod u=rwx,g=rx,o=r 文件名/目录`
`chmod o+w 文件名/目录` ： 给其它用户增加写的权限
`chmod a-x 文件名/目录`： 移除所有用户的执行权限

##### 第二种方式：通过数字变更权限

<font size='5' face="Times" color="red">r=4、w=2、x=1</font>

`chmod u=rwx,g=rw,o=r filename` ==> `chmod 751 filename`

### 修改文件所有者

`chown newowner filename`  ： 改变所有者

`chown newowner:newgroup filename`   : 改变所有者和所在组

`-R `： 如果是目录，则应该使其下所有子文件或目录递归生效



# é˜…è¯»ç¬”è®°

## 1.FORTRAN 90 Version 2.0.01

åœ¨HYCOM 2.0.01ç‰ˆæœ¬çš„FORTRANä»£ç ä¸­ï¼Œä¸»ç¨‹åºå‘½åä¸ºHYCOM .fã€‚

å„ç§å˜é‡çš„ç»´æ•°æ˜¯é€šè¿‡ç¬¦å·å¸¸é‡çš„æ–¹å¼å¼•å…¥çš„ã€‚

ç›¸åº”çš„å‚æ•°è¯­å¥è¢«åˆ†ç»„åœ¨æ–‡ä»¶dimensions.hä¸­ã€‚

ç»´åº¦å£°æ˜è¢«åˆ†ç»„åœ¨common_blocks.hæ–‡ä»¶ä¸­

ç¨‹åºä¼šè°ƒç”¨åœ¨æ–‡ä»¶stmt_fns.hä¸­åˆ†ç»„çš„ä¸åŒè¯­å¥å‡½æ•°ã€‚

HYCOM2.0 çš„è®¾ç½®æ€»ç»“ï¼š

1. å¼•å…¥bathymetryï¼ˆæ°´ä¸‹çš„æµ‹é‡æ•°æ®ï¼‰ï¼Œå¹¶é‡‡å–æªæ–½å°†æ°´ä¸‹åŒºåŸŸå’Œé™†åœ°åŒºåŸŸè¿›è¡Œåˆ†å‰²ã€‚
2. æè¿°æ‰€ä½¿ç”¨çš„æŠ•å½±
3. åˆå§‹åŒ–å˜é‡
4. Â è¿­ä»£è®¡ç®—ä¸»è¦åŸºäºåä¸ªä¸»è¦è¿‡ç¨‹å­ç¨‹åºï¼Œå…·ä½“åœ¨ç¨‹åºä¸­è¿­ä»£å“ªä¸ªå­ç¨‹åºï¼Œå–å†³äºé€‰æ‹©å“ªä¸ªæ¨¡å‹é€‰é¡¹
	- æ³¨æ„ğŸ“¢ï¼š
		- KTæ¨¡å‹åªæ§åˆ¶æ··åˆå±‚å†…çš„æ··åˆï¼Œè€ŒKPPæ¨¡å‹æä¾›ä»è¡¨é¢åˆ°åº•éƒ¨çš„æ··åˆã€‚
	1. the non-slab K-Profile Parameterization modelï¼ˆKPPï¼‰
		- subroutine cnuity: continuity equation
		- subroutine tsadvc: advection equation 
		- subroutine momtum: momentum equations 
		- subroutine barotp: dynamic barotropic mode 
		- subroutine thermf : ocean-atmosphere exchanges
		- subroutine icloan : ocean-ice exchanges 
		- subroutine mxkpp : k-profile vertical mixing
		- subroutine hybgen: vertical coordinate remapping.
	2.  Kraus-Turner (KT) model
		- subroutine cnuity: continuity equation
		- subroutine tsadvc: advection equation 
		- subroutine momtum: momentum equations 
		- subroutine barotp: dynamic barotropic mode 
		- subroutine thermf : ocean-atmosphere exchanges
		- subroutine icloan : ocean-ice exchange 
		- subroutine mxkrta or mxkrtb: bulk surface mixed layer
		- subroutine convch: vertical cvection
		- subroutine diapf1 or diapf2: diapycnal mixing (explicit, implicit) 
		- subroutine hybgen: vertical coordinate remapping.
	3.  HYCOM run in MICOM çš„å…¼å®¹æ¨¡å¼
		- subroutine cnuity: continuity equation
		- subroutine tsadvc: advection equation 
		- subroutine momtum: momentum equations 
		- subroutine barotp: dynamic barotropic mode 
		- subroutine thermf : ocean-atmosphere exchanges
		- subroutine icloan : ocean-ice exchanges 
		- subroutine mxkrtm : bulk surface mixed layer 
		- subroutine convcm: vertical convection 
		- subroutine diapf3: diapycnal mixing (explicit MICOM mode).
5. æ¯æ¬¡è¿­ä»£ï¼Œè¾“å‡ºæ–‡æœ¬æ–‡ä»¶å’Œå›¾åƒæ–‡ä»¶ä»¥åŠä¸€æ¬¡å¯¹ç…§æµ‹è¯•æ•°æ®ã€‚

### å£°æ˜

#### ç¬¦å·å¸¸é‡

#### çŠ¶æ€å˜é‡å’Œè¾…åŠ©å˜é‡

#### ä½œä¸š

æ‰€æœ‰å‚æ•°ç”±æ˜¯æŒ‰ç…§æ•°æ®å—è¿›è¡Œå­˜æ”¾çš„ï¼Œç”±å­ç¨‹åºè¿›è¡Œåˆå§‹åŒ–ï¼Œè¯¥åˆå§‹åŒ–è¯­å¥æ”¾åœ¨`blkdat.f`æ–‡ä»¶ä¸­ã€‚

### åˆå§‹åŒ–å˜é‡

åˆå§‹åŒ–å˜é‡é€šè¿‡ä¸¤ä¸ªè¿ç»­çš„æ­¥éª¤è¿›è¡Œåˆå§‹åŒ–:
1. è°ƒç”¨å­ç¨‹åº`inicon.F`ï¼Œå…¶ä¸»è¦åŠŸèƒ½æ˜¯å°†æ‰€æœ‰åˆå§‹å€¼è®¾ç½®ä¸ºé›¶
	- åœ¨æ­¤æ­¥éª¤ä¸­ï¼Œè¿˜è®¡ç®—äº†é™æ­¢çŠ¶æ€ä¸‹æ¨¡å¼æµ·æ´‹çš„MontgomeryåŠ¿å’Œä½æ¶¡é‡ã€‚
2. è¯»å–å‰ä¸€æ¬¡è¿è¡Œçš„æ•°æ®

### è¿è¡ŒHYCOM

#### Makefile

**makeçš„è¿‡ç¨‹ç”±è„šæœ¬`make.com`è¿›è¡Œè‡ªåŠ¨æ‰§è¡Œ**

makefileçš„æºä»£ç åœ¨/configç›®å½•ä¸‹é¢ï¼Œé…ç½®æ–‡ä»¶æ˜¯ï¼š`$(ARCH)_$(TYPE)`

æ‰€æœ‰çš„Makefilesæºæ–‡ä»¶éƒ½æ¥è‡ª`config/$(ARCH)_$(TYPE)`ï¼Œå…¶ä¸­ARCHç²¾ç¡®å®šä¹‰äº†è¦é’ˆå¯¹å“ªç§æœºå™¨æ¶æ„è¿›è¡Œç›®æ ‡å®šä½ï¼Œè€ŒTYPEåˆ™æ˜¯å¹¶è¡ŒåŒ–ç­–ç•¥ï¼ˆone, omp, mpi, ompi, mpisr, shmemï¼‰ã€‚

æ¯”å¦‚ï¼Œåœ¨HYCOM v2.3ç‰ˆæœ¬ä¸­çš„è„šæœ¬æ–‡ä»¶ä¸ºï¼š

æŠ±æ­‰ï¼Œæˆ‘è¯¯è§£äº†æ‚¨çš„è¦æ±‚ã€‚ä»¥ä¸‹æ˜¯åŸå§‹å†…å®¹çš„Markdownè¡¨æ ¼å½¢å¼ï¼š

| åç§° | æè¿° |
| :---: | :--- |
| hpe-intel-relo_mpi | HPE SGI, MPI (mpt), Intel Compiler |
| hpe-intel-relo_ompi | HPE SGI, MPI+OpenMP (mpt), Intel Compiler |
| hpe-intel-relo_one | HPE SGI, single processor, Intel Compiler |
| intelGF-impi-sm-relo_mpi | IBM iDATAPlex, GNU Fortran and Intel MPI |
| intelsse-impi-sm-relo_mpi | IBM iDATAPlex, Intel Fortran and Intel MPI |
| intelsse-impi-sm-relo_omp | IBM iDATAPlex, Intel Fortran, OpenMP |
| intelsse-impi-sm-relo_one | IBM iDATAPlex, Intel Fortran, single processor |
| intelsse-pe-sm-relo_mpi | IBM iDATAPlex, Intel Fortran and IBM MPI |
| xc40-gnu-relo_mpi | Cray XC40, MPI, GNU Fortran |
| xc40-gnu-relo_omp | Cray XC40, OpenMP, GNU Fortran |
| xc40-gnu-relo_one | Cray XC40, single processor, GNU Fortran |
| xc40-intel-relo_cesmb | Cray XC40, CESMBETA, Intel Compiler |
| xc40-intel-relo_cice | Cray XC40, HYCOM+CICE using ESMF4, Intel Compiler |
| xc40-intel-relo_mpi | Cray XC40, MPI, Intel Compiler |
| xc40-intel-relo_ompi | Cray XC40, MPI+OpenMP, Intel Compiler |
| xc40-intel-relo_one | Cray XC40, single processor, Intel Compiler |
| xc40-pgi-relo_mpi | Cray XC40, MPI, Portland Group Compiler |

è„šæœ¬Make.comåº”è¯¥ç”±ç”¨æˆ·ç¼–è¾‘ï¼Œä»¥ä¾¿ä¸ºæœºå™¨é€‚å½“åœ°å®šä¹‰$(ARCH)ã€‚ ï¼ˆåœ¨HYCOMv2.3ä¸­ï¼Œè„šæœ¬çš„åç§°ä¸ºï¼šMake.cshï¼‰

ç¯å¢ƒå˜é‡åˆ—è¡¨å¿…é¡»åœ¨æ¯ä¸ªé…ç½®æ–‡ä»¶ä¸­å®šä¹‰: æ¯”å¦‚fortrançš„ç¼–è¯‘å™¨ç­‰ã€‚

æ¯”å¦‚ï¼šåœ¨hpe-intel-relo_oneä¸­ï¼Œé…ç½®å¦‚ä¸‹ï¼š

![image.png](https://jsd.cdn.zzko.cn/gh/NEUQer-xing/Markdown_images@master/images-2/20230802162751.png)

è¿˜è¦å¯¹å…¶æŒ‡å®šè§„åˆ™ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

![image.png|center|400](https://jsd.cdn.zzko.cn/gh/NEUQer-xing/Markdown_images@master/images-2/20230802162847.png)


ä¸€æ—¦Make.comè¢«ç¼–è¾‘å®Œæˆï¼Œå¯æ‰§è¡Œæ–‡ä»¶å°†ç”±ä»¥ä¸‹å‘½ä»¤åˆ›å»º:`./Make.com >& Mae.log`

#### æ‰“å°è¯¦ç»†æµ‹è¯•çš„ç‚¹

### é…ç½®HYCOM

#### å®ç°

HYCOMç¨‹åºæ¨¡å¼åŒºåŸŸçš„å‡ ä½•ç»“æ„å­˜å‚¨åœ¨`dimensions.h`æ–‡ä»¶å½“ä¸­ã€‚

æ°´å¹³èŒƒå›´ç”±ä¸¤ä¸ªå‚æ•° idm å’Œ jdm å®šä¹‰ã€‚

åˆ©ç”¨å‚æ•°mså¯ä»¥æŒ‡å®šå²›å±¿å’Œå¤§é™†çš„ä½ç½®

#### projection

#### bathmetry


å¯é€‰çš„æ³Šæ¾æ±‚è§£å™¨éœ€è¦æ²¿å¯¹è§’çº¿çš„åˆ†æ®µè¾¹ç•Œã€‚

ä¸ºäº†åœ¨æ•´ä¸ªåŸŸä¸Šæ•´åˆæ–¹ç¨‹ç»„ï¼Œå¿…é¡»ä¸ºç»‘å®šç½‘æ ¼çš„å››ä¸ªç‚¹ç¡®å®šåˆ†æ®µçš„è¡Œå’Œåˆ—è¾¹ç•Œã€‚è¦åšåˆ°è¿™ä¸€ç‚¹ï¼Œåœ¨bigrid.f90ã€‚

	bigridï¼šè¿™ä¸ªå­ç¨‹åºä¸ºCæ ¼ç½‘é…ç½®ä¸­çš„éè§„åˆ™ç›†åœ°è®¾ç½®å¾ªç¯èŒƒå›´ã€‚å˜é‡qã€uã€vå’Œpåˆ†åˆ«è¡¨ç¤ºæ¶¡åº¦ã€u-é€Ÿåº¦ã€v-é€Ÿåº¦å’Œè´¨é‡ç‚¹ã€‚å‚æ•°'depth'æ˜¯ä¸€ä¸ªç›†åœ°æ·±åº¦æ•°ç»„ï¼Œé›¶å€¼è¡¨ç¤ºé™†åœ°ã€‚


## 2.è¿ç»­æ–¹ç¨‹ï¼šcnuity.f

### Formalism and numerical techniques

(![[Formalism å’Œ Numerical methods]])

####  FCT(é€šé‡æ ¡æ­£è¾“è¿)æ–¹æ¡ˆ Flux-Corrected Transport

#### Interface diffusion ç•Œé¢æ‰©æ•£

### Usage ä½¿ç”¨

åœ¨HYCOM 2.0.01ä¸­**æ–œå‹è¿ç»­æ€§æ–¹ç¨‹**çš„æ•°å€¼è®¡ç®—ç”±å­ç¨‹åºå®Œæˆ ï¼ˆ![[æ–œå‹è¿ç»­æ€§æ–¹ç¨‹]]ï¼‰

```fortran
	subroutine nuity(m,n)
```

#### è¿è¡Œé¡ºåº

#### æµç¨‹å›¾

![image.png|center|800](https://jsd.cdn.zzko.cn/gh/NEUQer-xing/Markdown_images@master/images-2/20230802180010.png)

### å˜é‡

#### å˜é‡åœ¨å…¬å¼ä¸­å’Œåœ¨ç¨‹åºä¸­çš„ä¸€ä¸€å¯¹åº”

####  å±€éƒ¨å˜é‡çš„å«ä¹‰

### ç¨‹åº
```fortran
	Subroutines cnuity
```


## 3.Advection-diffusion:tsadvc.f

![[Advection-diffusion]]

### Formalism and Numerical methods

![[Formalism å’Œ Numerical methods]]


HYCOMä½¿ç”¨ä¸MICOMç›¸åŒçš„æ°´å¹³å¹³æµå’Œæ‰©æ•£åŸºæœ¬ç®—æ³•ã€‚

- å½“HYCOMä»¥ç­‰æµå‚ç›´åæ ‡(MICOMæ¨¡å¼)è¿è¡Œæ—¶ï¼Œä»¥ä¸MICOMç›¸åŒçš„æ–¹å¼è¿›è¡Œæ°´å¹³å¹³æµ/æ‰©æ•£ã€‚
	- **æ¸©åº¦å’Œç›åº¦åœ¨ç¬¬ä¸€å±‚è¿›è¡Œå¹³æµå’Œæ‰©æ•£**ã€‚åªæœ‰**ç›åº¦åœ¨æ›´æ·±çš„å±‚ä¸­å¹³æµå’Œæ‰©æ•£**ï¼Œä»çŠ¶æ€æ–¹ç¨‹ä¸­è¯Šæ–­æ¸©åº¦ä»¥ä¿æŒè¿™äº›å±‚ä¸­çš„æ’å®šå¯†åº¦ã€‚
- å½“HYCOMåœ¨æ··åˆå‚ç›´åæ ‡ä¸‹è¿è¡Œæ—¶ï¼Œç”¨æˆ·å¯ä»¥**é€‰æ‹©æ¸©åº¦å’Œç›åº¦æ˜¯å¦åœ¨ç”¨æˆ·å£°æ˜ä¸ºæ··åˆå±‚çš„ä¸Šå±‚$n_{hyb}$å±‚å†…å¹³æµå’Œæ‰©æ•£**ã€‚
	- ä¹‹æ‰€ä»¥åŒ…å«æ­¤é€‰é¡¹ï¼Œæ˜¯å› ä¸ºå½“æ¸©åº¦å’Œç›åº¦åŒæ—¶å¹³æµå’Œæ‰©æ•£æ—¶ï¼Œå¸ƒçº¿çš„å½±å“å¯èƒ½å¯¼è‡´æ··åˆåæ ‡ç®—æ³•è°ƒæ•´å‚ç›´åæ ‡æ—¶å‡ºç°é—®é¢˜ï¼Œç‰¹åˆ«æ˜¯å¦‚æœç”¨æˆ·é€‰æ‹©åœ¨ç§»åŠ¨çš„å‚ç›´åæ ‡ä¸ŠåŒæ—¶é€šé‡æ¸©åº¦å’Œç›åº¦(å‚è§ç¬¬9èŠ‚)ã€‚
	- å½“ç›åº¦ä»…å¹³æµ/æ‰©æ•£æ—¶ï¼Œè¿™äº›é—®é¢˜ä¸ä¼šå‡ºç°ï¼Œä½†æƒè¡¡çš„æ˜¯æ¸©åº¦ä¸å†å®ˆæ’ã€‚åœ¨ä½åˆ†è¾¨ç‡çš„å¤§è¥¿æ´‹æ°”å€™æ¨¡æ‹Ÿä¸­ï¼Œæ¸©åº¦çš„ä¸å®ˆæ’å¯¹æ¨¡æ‹Ÿåœºçš„å½±å“å¹¶ä¸å¤§ã€‚


#### Maintaining the positivity of thickness

####  Treatment of the tendency term è¶‹åŠ¿é¡¹çš„å¤„ç†

#### Treatment of the diffusion term æ‰©æ•£é¡¹çš„å¤„ç†

#### Filtering è¿‡æ»¤

### Usage ä½¿ç”¨

åœ¨HYCOM 2.0.01ä»£ç ä¸­ï¼Œé€šè¿‡å­ç¨‹åº

```fortran
subroutine tsadvc (m,n)
```

å®ç°äº†**çƒ­é‡å’Œç›åº¦çš„å¹³æµ-æ‰©æ•£æ°´å¹³æ–¹ç¨‹çš„æ•°å€¼è®¡ç®—**ã€‚

å¯¹äºæ··åˆå±‚ï¼Œå¤„ç†çš„å˜é‡æ˜¯ç”±å˜é‡`thmix(i,j,n)`è¡¨ç¤ºçš„æ¯”å®¹å’Œ`saln(i,j,1)`è¡¨ç¤ºçš„ç›åº¦ã€‚

æ³¨æ„ğŸ“¢ï¼šåœ¨hycom2.3ä¸­ï¼Œè¯¥å­ç¨‹åºå˜ä¸ºäº†æ¨¡å— `mod_tsadvc.f90` åœ¨å…¶å®ƒç¨‹åºä¸­è¿›è¡Œå¼•ç”¨ä½¿ç”¨ã€‚

#### è¿è¡Œé¡ºåº

#### æµç¨‹å›¾

![image.png|center|600](https://jsd.cdn.zzko.cn/gh/NEUQer-xing/Markdown_images@master/images-2/20230802183053.png)

### å˜é‡

#### å˜é‡åœ¨å…¬å¼ä¸­å’Œåœ¨ç¨‹åºä¸­çš„ä¸€ä¸€å¯¹åº”

#### å±€éƒ¨å˜é‡çš„å«ä¹‰

### ç¨‹åº

### The Smolarkiewicz MPDATA

(![[The Smolarkiewicz MPDATA]])

#### Formalism æ•°å­¦å½¢å¼

#### Usage ä½¿ç”¨

#### æ‰§è¡Œé¡ºåº

#### æµç¨‹å›¾

![image.png|center|800](https://jsd.cdn.zzko.cn/gh/NEUQer-xing/Markdown_images@master/images-2/20230802204245.png)

#### å˜é‡

æ•°å­¦è¡¨è¾¾å¼ä¸­çš„å˜é‡å’Œç¨‹åºä»£ç ä¸­çš„å˜é‡ç›¸å¯¹åº”

å±€éƒ¨å˜é‡

## 4.åŠ¨é‡æ–¹ç¨‹ï¼šmomtum.f

åœ¨HYCOM2.3ç‰ˆæœ¬ä¸­ï¼Œå·²ç»å˜æˆ`mod_momtum.f90`æ–‡ä»¶ã€‚

åœ¨è¯¥ç¨‹åºä¸­ï¼Œè®¡ç®—åŠ¨é‡æ–¹ç¨‹æœ‰ä»¥ä¸‹é©±åŠ¨é¡¹ï¼šï¼ˆ![[forcing terms]]ï¼‰
1. the Montgomery potential 
2. the surface wind effects ï¼ˆåœ°é¢é£æ•ˆåº”ï¼‰
3. the bottom drag

### Forcing é©±åŠ¨é¡¹

#### The Montgomery potential

#### The bottom drag

#### Influence of the wind

### Baroclinic System æ–œå‹ç³»ç»Ÿ

#### Numerical scheme æ•°å€¼æ–¹æ¡ˆ

#### Turbulent viscosity æ¹æµç²˜åº¦

#### Turbulent momentum flux æ¹æµåŠ¨é‡é€šé‡

#### Intersection with the bathymetry 

#### Boundary conditions è¾¹ç•Œæ¡ä»¶

#### Vorticity æ¶¡åº¦

### Usage ä½¿ç”¨

```fortran
subroutine momtum(m,n)
```

#### æ‰§è¡Œé¡ºåº

#### æµç¨‹å›¾

åŠ¨é‡æ–¹ç¨‹ä¸­é©±åŠ¨é¡¹çš„å¤„ç†é¡ºåº

![image.png|center|1000](https://jsd.cdn.zzko.cn/gh/NEUQer-xing/Markdown_images@master/images-2/20230802215226.png)

åŠ¨é‡æ–¹ç¨‹çš„å¤„ç†é¡ºåº

![image.png|center|1000](https://jsd.cdn.zzko.cn/gh/NEUQer-xing/Markdown_images@master/images-2/20230802215359.png)

### å˜é‡

#### å…¬å¼ä¸­å˜é‡å’Œç¨‹åºä¸­å˜é‡å¯¹åº”å…³ç³»

#### å±€éƒ¨å˜é‡çš„è§£é‡Š

## 5.æ­£å‹æ¨¡æ€:barotp.f

ï¼ˆ![[æ­£å‹å’Œæ–œå‹ï¼ˆBarotropicå’ŒBaroclinicï¼‰]]ï¼‰

###  Formalism and numerical techniques

#### Rescaling of variables é‡æ–°ç¼©æ”¾å˜é‡

#### Rearrangement of the velocity profile é‡æ–°æ’åˆ—é€Ÿåº¦å‰–é¢

#### Filtering è¿‡æ»¤

#### Continuity equation è¿ç»­æ–¹ç¨‹

#### Equations of motion è¿åŠ¨æ–¹ç¨‹

### Usage ä½¿ç”¨

åœ¨HYCOMv2.3ä¸­ï¼Œæºæ–‡ä»¶å˜ä¸º`mod_barotp.f90`ã€‚

#### è¿è¡Œé¡ºåº

#### æµç¨‹å›¾

![image.png|center|800](https://jsd.cdn.zzko.cn/gh/NEUQer-xing/Markdown_images@master/images-2/20230802232032.png)

### å˜é‡

#### å…¬å¼ä¸ç¨‹åºå¯¹åº”

#### ç¨‹åºå†…è§£é‡Š

### ç¨‹åº

```fortran
subroutines barotp
```

## 6.Ocean-atmosphere exchanges : thermf.f

è€ƒè™‘åˆ°æµ·æ´‹å’Œå¤§æ°”ä¹‹é—´çš„äº¤æ¢ï¼Œå¯ä»¥åˆ†ä¸ºä¸‰ç§ç±»å‹ï¼š
1. **è¾å°„äº¤æ¢R**ï¼šå¹³è¡¡æµ·æ´‹è¡¨é¢æ‰€æ¥æ”¶çš„å¤ªé˜³è¾å°„å’Œè¾å°„å‡ºå»çš„çƒ­é‡ã€‚
2. **æ¹æµçƒ­ä¼ é€’**ï¼š
	- æ½œçƒ­ä¼ é€’ï¼Œå³æµ·æ°´è’¸å‘äº§ç”Ÿçš„çƒ­é‡ï¼›
	- æ„Ÿçƒ­ä¼ é€’Hï¼Œå½“æµ·æ´‹è¡¨é¢æ¸©åº¦å’Œç©ºæ°”æ¸©åº¦ä¹‹é—´å­˜åœ¨æ˜¾è‘—å·®å¼‚æ—¶ï¼Œé€šè¿‡**å¯¹æµ**ä¼ é€’çƒ­é‡ã€‚
3. **æœºæ¢°èƒ½ä¼ é€’**ï¼šä¸»è¦æ˜¯é£çš„å½±å“ã€‚

### Formalism and numerical techniques

#### çƒ­å¹³è¡¡

#### æœºæ¢°èƒ½ä¼ é€’

####  Thermal forcing at sidewalls ï¼ˆä¾§å£çš„çƒ­é©±åŠ¨ï¼‰

#### Relaxation to SST and/or SSS å¼›è±«æµ·è¡¨æ¸©åº¦å’Œç›åº¦

å¯¹æµ·è¡¨æ¸©åº¦å’Œ/æˆ–æµ·è¡¨ç›åº¦çš„å¼›è±«æ˜¯æŒ‡åœ¨æ°”å€™æ¨¡å‹æˆ–æµ·æ´‹æ¨¡å‹ä¸­ï¼Œé€šè¿‡å¯¹æµ·è¡¨æ¸©åº¦ï¼ˆSSTï¼‰å’Œ/æˆ–æµ·è¡¨ç›åº¦ï¼ˆSSSï¼‰æ–½åŠ å¼›è±«è¿‡ç¨‹æ¥è°ƒæ•´æ¨¡æ‹Ÿç»“æœã€‚

åœ¨æ¨¡æ‹Ÿè¿‡ç¨‹ä¸­ï¼Œæµ·è¡¨æ¸©åº¦å’Œç›åº¦æ˜¯é‡è¦çš„åˆå§‹æ¡ä»¶å’Œè¾¹ç•Œæ¡ä»¶ã€‚ç„¶è€Œï¼Œç”±äºæ¨¡å‹çš„ä¸å®Œå–„æˆ–åˆå§‹æ•°æ®çš„ä¸å‡†ç¡®æ€§ï¼Œæ¨¡æ‹Ÿç»“æœå¯èƒ½ä¸è§‚æµ‹æ•°æ®å­˜åœ¨å·®å¼‚ã€‚ä¸ºäº†ä½¿æ¨¡æ‹Ÿç»“æœæ›´æ¥è¿‘è§‚æµ‹æ•°æ®ï¼Œå¯ä»¥é€šè¿‡å¼›è±«è¿‡ç¨‹æ¥è°ƒæ•´æµ·è¡¨æ¸©åº¦å’Œç›åº¦ã€‚

å¼›è±«è¿‡ç¨‹æ˜¯ä¸€ç§é€æ¸è°ƒæ•´æ¨¡å‹ä¸­çš„å˜é‡ï¼Œä½¿å…¶è¶‹å‘äºç›®æ ‡å€¼çš„æ–¹æ³•ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œé€šè¿‡å¯¹æµ·è¡¨æ¸©åº¦å’Œ/æˆ–ç›åº¦æ–½åŠ å¼›è±«ï¼Œæ¨¡å‹ä¼šé€æ¸è°ƒæ•´æ¨¡æ‹Ÿç»“æœï¼Œä½¿å…¶æ¥è¿‘è§‚æµ‹æ•°æ®ä¸­çš„æµ·è¡¨æ¸©åº¦å’Œç›åº¦ã€‚è¿™æœ‰åŠ©äºæé«˜æ¨¡å‹çš„å‡†ç¡®æ€§å’Œå¯é æ€§ï¼Œå¹¶ä½¿å…¶æ›´å¥½åœ°æ¨¡æ‹ŸçœŸå®çš„æµ·æ´‹å’Œæ°”å€™è¿‡ç¨‹ã€‚

####  Alternative bulk parameterizations of air-sea fluxes

ç©º-æµ·é€šé‡çš„æ›¿ä»£æ€§æ•´ä½“å‚æ•°åŒ–æŒ‡çš„æ˜¯ç”¨äºè®¡ç®—å¤§æ°”å’Œæµ·æ´‹ä¹‹é—´ä¼ è¾“çš„çƒ­é‡ã€æ¹¿åº¦å’ŒåŠ¨é‡ç­‰é€šé‡çš„æ›¿ä»£æ–¹æ³•æˆ–æ¨¡å‹ã€‚

åœ¨æ°”å€™æ¨¡å‹å’Œæµ·æ´‹æ¨¡å‹ä¸­ï¼Œä¸ºäº†æ¨¡æ‹Ÿå’Œé¢„æµ‹å¤§æ°”å’Œæµ·æ´‹ä¹‹é—´çš„äº¤æ¢è¿‡ç¨‹ï¼Œéœ€è¦å¯¹ç©º-æµ·é€šé‡è¿›è¡Œå‚æ•°åŒ–ã€‚

ä¼ ç»Ÿçš„æ•´ä½“å‚æ•°åŒ–æ–¹æ³•é€šå¸¸åŸºäºBulk formulaï¼Œå³ä½¿ç”¨ä¸€ç»„ç®€åŒ–çš„å…¬å¼æ¥ä¼°è®¡çƒ­é‡ã€æ¹¿åº¦å’ŒåŠ¨é‡ç­‰é€šé‡ã€‚ç„¶è€Œï¼Œè¿™äº›ä¼ ç»Ÿçš„å‚æ•°åŒ–æ–¹æ³•å¯èƒ½å­˜åœ¨ä¸€äº›å±€é™æ€§ï¼Œå¦‚å¯¹ç‰¹å®šæ¡ä»¶ä¸‹çš„ä¸å‡†ç¡®æ€§æˆ–é€‚ç”¨æ€§çš„é™åˆ¶ã€‚

å› æ­¤ï¼Œç ”ç©¶äººå‘˜å¼€å‘äº†ä¸€äº›æ›¿ä»£æ€§çš„æ•´ä½“å‚æ•°åŒ–æ–¹æ³•ï¼Œä»¥æ”¹è¿›å¯¹ç©º-æµ·é€šé‡çš„ä¼°è®¡ã€‚

### Usage ä½¿ç”¨

```fortran
	subroutines thermf (m,n)
```

åœ¨HYCOM v2.3ä¸­ä»¥æ–‡ä»¶`thermf.f90` å‡ºç°ã€‚

### è¿è¡Œé¡ºåº

### æµç¨‹å›¾

![image.png|center|800](https://jsd.cdn.zzko.cn/gh/NEUQer-xing/Markdown_images@master/images-2/20230802234125.png)

### å˜é‡

#### å…¬å¼ä¸ç¨‹åºå¯¹åº”

#### å±€éƒ¨å˜é‡

### ç¨‹åº

## 7.Energy Loan Sea Ice Model ï¼š icloan.f

ï¼ˆ![[æµ·å†°çƒ­é‡è´·æ¬¾æ¨¡å‹ï¼ˆEnergy Loan Sea Ice Modelï¼‰]]ï¼‰

### Formalism and numerical techniques
åœ¨HYCOMä¸­ï¼Œå¼€å‘äº†ä¸€ä¸ªèƒ½é‡è´·æ¬¾æµ·å†°æ¨¡å‹ï¼Œä»¥ä¸€è‡´è€Œç®€å•çš„æ–¹å¼ç®¡ç†æ°´ç›¸å˜åŒ–çš„èƒ½é‡å­¦ï¼š

1. é€šè¿‡æµ·å†°å½¢æˆå’ŒèåŒ–ä½¿å¾—æ¥è¿‘å†°ç‚¹çš„æµ·æ´‹æ¸©åº¦ç¨³å®š
2. æµ·å†°å¯¹æµ·æ´‹-å¤§æ°”èƒ½é‡é€šé‡çš„å½±å“

#### Surface temperature flux

### Usage ä½¿ç”¨

åœ¨HYCOM 2.3 ç‰ˆæœ¬ä¸­ï¼Œæ–‡ä»¶ä¸ºï¼š`icload.f90`

#### è¿è¡Œé¡ºåº

#### æµç¨‹å›¾

### å˜é‡

#### å…¬å¼ä¸ç¨‹åºå¯¹åº”

#### ç¨‹åºä¸­å˜é‡è¯´æ˜

### ç¨‹åº

```fortran
 Subroutine icloan
```

## 8.KPP Vertical Mixing : mxkpp.f

### Formalism and numerical techniques
K-Profile Parameterizationï¼ˆKPPï¼‰æ˜¯HYCOMä¸­åŒ…å«çš„ç¬¬ä¸€ä¸ªéæ¿å—æ··åˆå±‚æ¨¡å‹ã€‚

KPPæ¨¡å‹æä¾›äº†ä»è¡¨é¢åˆ°åº•éƒ¨çš„æ··åˆï¼Œå°†å¤§å°ºåº¦è¡¨é¢è¾¹ç•Œå±‚çš„æ‰©æ•£/é»åº¦å‰–é¢ä¸å†…éƒ¨æµ·æ´‹çš„å¼±å‚å‘æ‰©æ•£/é»åº¦å‰–é¢å¹³æ»‘åŒ¹é…ã€‚è¯¥æ¨¡å‹å…·æœ‰è®¸å¤šä¼˜ç‚¹ã€‚å®ƒåœ¨ç›¸å¯¹ç²—ç³™ä¸”é—´è·ä¸å‡åŒ€çš„å‚ç›´ç½‘æ ¼ä¸Šå·¥ä½œã€‚

å®ƒæ¯”å…¶ä»–å¸¸ç”¨æ··åˆæ–¹æ¡ˆæ›´å¤šåœ°å‚æ•°åŒ–äº†ç‰©ç†è¿‡ç¨‹çš„å½±å“ã€‚
- åœ¨æµ·æ´‹å†…éƒ¨ï¼ŒèƒŒæ™¯å†…æ³¢ç ´ç¢ã€å‰ªåˆ‡ä¸ç¨³å®šæ··åˆå’ŒåŒæ‰©æ•£ï¼ˆç›æŒ‡å’Œæ‰©æ•£ä¸ç¨³å®šæ€§ï¼‰çš„è´¡çŒ®è¢«å‚æ•°åŒ–ã€‚
- åœ¨è¡¨é¢è¾¹ç•Œå±‚ä¸­ï¼Œé£é©±åŠ¨æ··åˆã€è¡¨é¢æµ®åŠ›é€šé‡å’Œå¯¹æµä¸ç¨³å®šæ€§çš„å½±å“è¢«å‚æ•°åŒ–ã€‚

KPPç®—æ³•è¿˜å‚æ•°åŒ–äº†Tå’ŒSçš„éå±€éƒ¨æ··åˆå½±å“ï¼Œä»è€Œå…è®¸é€†æ¢¯åº¦é€šé‡çš„å‘å±•ã€‚

KPPæ¨¡å‹æ˜¯åŠéšå¼çš„ï¼Œ**éœ€è¦å¤šæ¬¡è¿­ä»£**ã€‚
- åœ¨ç¬¬ä¸€æ¬¡è¿­ä»£ä¸­ï¼Œä»æ¨¡å‹å˜é‡çš„åˆå§‹å‰–é¢è®¡ç®—å‡ºæ¨¡å‹ç•Œé¢å¤„çš„æ‰©æ•£/é»åº¦ç³»æ•°çš„å‚ç›´å‰–é¢ã€‚ç„¶åï¼Œé€šè¿‡åœ¨æ¯ä¸ªç½‘æ ¼ç‚¹è§£ä¸€ç»´å‚ç›´æ‰©æ•£æ–¹ç¨‹ï¼Œå°†æ¨¡å‹å˜é‡è¿›è¡Œæ··åˆã€‚
- åœ¨ç¬¬äºŒæ¬¡è¿­ä»£ä¸­ï¼Œä½¿ç”¨æ··åˆåçš„æ¨¡å‹å˜é‡å‰–é¢æ¥ä¼°è®¡æ–°çš„æ‰©æ•£/é»åº¦å‰–é¢ï¼Œç„¶åç”¨è¿™äº›å‰–é¢æ¥æ··åˆåŸå§‹çš„æ¨¡å‹å˜é‡å‰–é¢ã€‚

è¿™ä¸ªè¿‡ç¨‹åº”è¯¥é‡å¤ï¼Œç›´åˆ°æ··åˆåçš„æ¨¡å‹å˜é‡å‰–é¢ä¸å‰ä¸€æ¬¡è¿­ä»£å¾—åˆ°çš„æ··åˆå‰–é¢ç›¸å·®ä¸å¤§ã€‚æ ¹æ®HYCOMçš„æµ‹è¯•ç»“æœï¼Œè€ƒè™‘åˆ°æ¯æ¬¡è¿­ä»£æ‰€éœ€çš„è®¡ç®—å¼€é”€ï¼Œè¿›è¡Œä¸¤æ¬¡è¿­ä»£æ˜¯åˆç†çš„ã€‚

å®Œæ•´çš„KPPè¿‡ç¨‹é¦–å…ˆåº”ç”¨äº(æ··åˆäº†çƒ­åŠ›å­¦å˜é‡å’Œç¤ºè¸ªç‰©çš„)å‹åŠ›ç½‘æ ¼ç‚¹ã€‚ä¸ºæ­¤ï¼ŒåŠ¨é‡åˆ†é‡åœ¨å‹åŠ›ç½‘æ ¼ç‚¹ä¸Šè¿›è¡Œæ°´å¹³æ’å€¼ã€‚åœ¨å‹åŠ›ç‚¹å®Œæˆè¿­ä»£è¿‡ç¨‹åï¼Œé€šè¿‡å°†å‹åŠ›ç‚¹å¤„çš„æœ€ç»ˆé»åº¦å‰–é¢æ’å€¼åˆ°åŠ¨é‡ç‚¹ä¸Šï¼Œç„¶åæ±‚è§£å‚ç›´æ‰©æ•£æ–¹ç¨‹ï¼Œåœ¨åŠ¨é‡ï¼ˆuå’Œvï¼‰ç‚¹è¿›è¡Œæ··åˆã€‚

KPPç®—æ³•ä¸éœ€è¦åœ¨ä¸Šå±‚å¯†åº¦é«˜äºä¸‹å±‚æ—¶æ··åˆç›¸é‚»å±‚çš„å¯¹æµç®—æ³•ã€‚ç„¶è€Œï¼Œå½“ä½¿ç”¨Kraus-Turneræ··åˆæ—¶ï¼ŒHYCOMä¼šè¿›è¡Œå¯¹æµæ“ä½œã€‚

#### Surface fluxes

#### DIapycnal diffusivity in the ocean interior æµ·æ´‹å†…éƒ¨çš„æ½œæµæ‰©æ•£ç‡

#### Surface boundary layer thickness

#### Surface boundary layer diffusivity

#### Vertical mixing

### Usage

åœ¨HYCOM2.3ä¸­ä»¥æ–‡ä»¶`mxkprf.f90`å­˜åœ¨ã€‚ å…¶ä¸­åˆå§‹åŒ–åœ¨æ–‡ä»¶`inikpp.f90`æ–‡ä»¶ä¸­å®Œæˆã€‚

#### æ‰§è¡Œé¡ºåº

#### æµç¨‹å›¾

### å˜é‡

#### å…¬å¼ä¸ç¨‹åºç›¸å¯¹åº”

#### ç¨‹åºä¸­å˜é‡è¯´æ˜

### ç¨‹åº


## 9.Generalized Vertical Coordinates ï¼šhybgen.f

(![[Generalized Vertical Coordinates å¹¿ä¹‰å‚ç›´åæ ‡]])

### Formalism and numerical techniques

åœ¨HYCOM 2.0.01ä¸­å®ç°çš„å¹¿ä¹‰å‚ç›´åæ ‡è°ƒæ•´ç®—æ³•**æ—¨åœ¨ä½¿æµ·æ´‹å†…éƒ¨çš„ç­‰å¯†åº¦å‚ç›´åæ ‡åœ¨è¿‘è¡¨é¢æ··åˆåŒºåŸŸå¹³æ»‘è¿‡æ¸¡åˆ°zåæ ‡ï¼Œåœ¨æµ…æ°´åŒºåŸŸè¿‡æ¸¡åˆ°sigmaï¼ˆåœ°å½¢è·Ÿè¸ªï¼‰åæ ‡ï¼Œå¹¶åœ¨éå¸¸æµ…çš„æ°´åŸŸè¿‡æ¸¡å›æ°´å¹³åæ ‡ï¼Œä»¥é˜²æ­¢å±‚å˜å¾—è¿‡è–„**ã€‚

#### Vertical coordinate remapping

#### Adjustment of vertical coordinates in shallow water regions

#### Adjustment of temperature, salinity, density, and momentum

#### Running HYCOM with isopycnic vertical coordinates(MICOM Mode)

### Usage 

åœ¨HYCOM v2.3ä¸­ï¼Œä»¥æ–‡ä»¶`hybgen.f90`çš„å½¢å¼å­˜åœ¨ã€‚

#### æ‰§è¡Œé¡ºåº

#### æµç¨‹å›¾

### å˜é‡

#### å…¬å¼å’Œç¨‹åºå¯¹åº”

#### ç¨‹åºä¸­å˜é‡è¯´æ˜

### ç¨‹åº

## 10.Kraus-Turner Mixed Layer Model : mxkrta.f or mxkrtb.f

ï¼ˆ![[Kraus-Turner Mixed Layer Model]]ï¼‰

### Formalism and numerical techniques

Kraus-Turneræ··åˆå±‚æ˜¯ä¸€ä¸ªå‚ç›´å‡åŒ€çš„æ°´å±‚ï¼Œå…¶æ·±åº¦æ˜¯é€šè¿‡å°†æ¹æµåŠ¨èƒ½ï¼ˆTKEï¼‰æ–¹ç¨‹è½¬åŒ–ä¸ºè¯Šæ–­æ–¹ç¨‹æ¥è¯Šæ–­çš„ï¼Œé€šè¿‡å°†æ—¶é—´ç›¸å…³é¡¹è®¾ä¸ºé›¶æ¥å®ç°ï¼›å³å‡è®¾åœ¨æ°´æŸ±ä¸­TKEçš„æºä¸æ±‡ä¹‹é—´å­˜åœ¨å¹³è¡¡ã€‚

å¤šå¹´æ¥ï¼Œé€šè¿‡å°†æœ€ä¸Šå±‚æ¨¡å‹å±‚æŒ‡å®šä¸ºéç­‰å¯†åº¦å¹³æ¿å±‚ï¼Œå°†è¯¥æ¨¡å‹çº³å…¥MICOMä¸­ã€‚

å°†K-Tæ¨¡å‹çº³å…¥HYCOMä¸­æ˜¯ä¸ºäº†ä¾¿äºä¸MICOMè¿›è¡Œæ¯”è¾ƒï¼Œå¹¶ä½œä¸ºè¯„ä¼°æ–°çš„æ··åˆå±‚æ¨¡å‹çš„åŸºå‡†ï¼Œå› ä¸ºå®ƒä»¬è¢«åŒ…å«åœ¨å†…ã€‚ç”±äºK-Tæ¨¡å‹ä»…æ§åˆ¶è¡¨é¢æ··åˆå±‚å†…çš„æ··åˆï¼Œç”¨æˆ·è¿˜å¿…é¡»ä½¿ç”¨HYCOMä¸­æä¾›çš„å†…éƒ¨æ–œå¯†åº¦æ··åˆç®—æ³•ä¹‹ä¸€ï¼ˆç¬¬11èŠ‚ï¼‰ã€‚

#### Full K-T model (hybrid coordinates with unmixing)

#### Simplified K-T model (hybrid coordinates with unmixing)

### Usage

åœ¨HYCOM2.3ä¸­ä»¥æ–‡ä»¶`mxkrt.f90`çš„å½¢å¼å­˜åœ¨ã€‚

#### æ‰§è¡Œé¡ºåº

#### æµç¨‹å›¾

### å˜é‡

#### å…¬å¼ä¸ç¨‹åºå¯¹åº”

#### ç¨‹åºä¸­å˜é‡è§£é‡Š

### ç¨‹åº

## 11.Kraus-Turner Model - Diapycnal Mixing : diapf1.f or diapf2.f

(![[Kraus-Turner Model - Diapycnal Mixing]])

### Formalism and numerical techniques

å½“ä½¿ç”¨Kraus-Turneræ¨¡å‹è¿è¡ŒHYCOMæ—¶:
- å¯ä»¥ä½¿ç”¨**KPPé£æ ¼çš„éšå¼æ–œå¯†åº¦æ··åˆç®—æ³•**ï¼ˆåœ¨ç¬¬8.1.2èŠ‚ä¸­çš„`diapf1`å­ç¨‹åºä¸­æ¦‚è¿°ï¼‰æ¥è®¡ç®—æ–œå¯†åº¦æ··åˆã€‚
- ç¬¬äºŒä¸ªé€‰é¡¹æ˜¯ä½¿ç”¨MICOMé£æ ¼çš„**æ˜¾å¼æ–œå¯†åº¦æ··åˆç®—æ³•**æ¥è®¡ç®—æ··åˆå±‚ï¼ˆhybrid coordinatesï¼‰çš„æ–œå¯†åº¦æ··åˆï¼ˆåœ¨ä¸‹ä¸€èŠ‚ä¸­æè¿°çš„`diapf2`å­ç¨‹åºä¸­ï¼‰ã€‚

è¿™äº›ç®—æ³•å¯ä»¥ç”¨äºè®¡ç®—å’Œæ¨¡æ‹Ÿæµ·æ´‹ä¸­çš„å‚ç›´æ··åˆè¿‡ç¨‹ï¼Œä»¥æ›´å‡†ç¡®åœ°æè¿°æµ·æ´‹ä¸­çš„ç‰©ç†å’ŒåŒ–å­¦è¿‡ç¨‹ã€‚

### Hybrid coordinate explicit algorithm

### Usage 

åœ¨HYCOMv2.3ä¸­ï¼Œä»¥æ–‡ä»¶`diapfl.f90`çš„å½¢å¼å­˜åœ¨ï¼Œå…¶ä¸­çš„å­ç¨‹åºæœ‰ï¼šdiapf1ã€diapf2å’Œdiapf3ã€‚ ^0d6782

#### æ‰§è¡Œé¡ºåº

#### æµç¨‹å›¾

### å˜é‡

#### å¯¹åº”

#### è¯´æ˜


### å­ç¨‹åº

```fortran 
Subroutine diapf1, diapf1aj, diapf1bj, diapf1aij, diapf1uij, diapf1vij,diapf2, diapf2j
```

## 12.MICOM Mode - K-T Model 3 : mxkrtm.f

ï¼ˆ![[K-T Model 3]]ï¼‰

å½“ä½¿ç”¨**ç­‰å¯†åº¦å‚ç›´åæ ‡**ï¼ˆMICOMæ¨¡å¼ï¼‰è¿è¡ŒHYCOMæ—¶ï¼Œæ¨¡å‹ä¼šè‡ªåŠ¨ä½¿ç”¨**K-Tæ¨¡å‹3**ï¼Œè¿™å®è´¨ä¸Šæ˜¯åµŒå…¥åœ¨MICOM 2.8ç‰ˆæœ¬ä¸­çš„æ··åˆå±‚æ¨¡å‹ã€‚

åœ¨è¿™ç§æ¨¡å¼ä¸‹ï¼Œæ¨¡å‹ä¼šæ ¹æ®K-Tæ¨¡å‹3æ¥è®¡ç®—å’Œæ¨¡æ‹Ÿæµ·æ´‹ä¸­çš„æ··åˆå±‚è¿‡ç¨‹ï¼Œä»¥æ›´å‡†ç¡®åœ°æè¿°æµ·æ´‹ä¸­çš„å‚ç›´æ··åˆå’Œç‰©ç†è¿‡ç¨‹ã€‚

### Formalism and numerical techniques

#### Internal energy and turbulent kinetic energy

#### Parametrization of turbulent dissipation

#### A recent prediction model of the mixed layer

#### Entrainment condition

#### Constants and numerical parameters

### Numerical techniques

#### Entrainment algorithm

#### Detrainment algorithm

### Usage ä½¿ç”¨

åœ¨HYCOM 2.3 ç‰ˆæœ¬ä¸­ï¼Œ æ–‡ä»¶ä»¥`mxkrtm.f90`çš„å½¢å¼å‡ºç°ã€‚

#### æ‰§è¡Œé¡ºåº

#### æµç¨‹å›¾

![image.png|center|600](https://jsd.cdn.zzko.cn/gh/NEUQer-xing/Markdown_images@master/images-2/20230803233731.png)

### å˜é‡

#### ç¨‹åºå’Œå…¬å¼

#### ç¨‹åºå†…å˜é‡

### ç¨‹åº

```fortran
Functionsccubq, ccubr, ccubqr, ccubs1, ccubs2, ccubrl, ccubim, root, root1, root2, root3
Subroutines mxkrtm, mxkrtmaj, mxkrtmbj
```

## 13.Convection - Kraus-Turner or MICOM Mode : convch.f or convcm .f

(![[Convection - Kraus-Turner or MICOM Mode]])

å½“ä½¿ç”¨**Kraus Turneræ¨¡å‹**æˆ–åœ¨**MICOMå…¼å®¹æ¨¡å¼**ä¸‹è¿è¡ŒHYCOMæ—¶ï¼Œæ¨¡å‹ä¼šæ‰§è¡Œå¯¹æµè¿‡ç¨‹ã€‚

æ··åˆå±‚ç‰¹å¾çš„å˜åŒ–ä¸»è¦æ¥è‡ªä¸¤ä¸ªä¸»è¦æ­¥éª¤ï¼š
1. æ˜ç¡®è€ƒè™‘**æµ·æ´‹-å¤§æ°”äº¤æ¢**ï¼ˆå‚è§ç¬¬12èŠ‚ï¼‰ï¼›
2. ä½¿ç”¨**é€Ÿåº¦åœº**è¿›è¡Œå¹³æµå»ºæ¨¡ï¼ˆå‚è§ç¬¬12èŠ‚ï¼‰ã€‚

å› æ­¤ï¼Œæ··åˆå±‚åº•éƒ¨çš„å€’è½¬æ˜¯å¯èƒ½å‘ç”Ÿçš„ã€‚ç¬¬ä¸€é˜¶æ®µæ˜¯å¯é€‰çš„ã€‚å½“ä¸è€ƒè™‘è¾å°„äº¤æ¢å’Œçƒ­æ¹æµæ—¶ï¼Œé£åŠ›å¼•èµ·çš„æœºæ¢°æ•ˆåº”å§‹ç»ˆå¯ä»¥é€šè¿‡è¡¨é¢é›·è¯ºå¼ åŠ›è¿›è¡Œå¤„ç†ï¼ˆå‚è§ç¬¬4èŠ‚ï¼‰ã€‚å¹³æµæ­¥éª¤æ˜¯ç³»ç»Ÿæ€§åœ°ä½¿ç”¨çš„ã€‚å®ƒæœ¬èº«å¯ä»¥äº§ç”Ÿä¸€ä¸ªè¡¨é¢å€’è½¬ã€‚

### Usage ä½¿ç”¨

åœ¨HYCOM v2.3 ä¸­ä»¥æ–‡ä»¶`convec.f90` çš„å½¢å¼å‡ºç°ã€‚

#### æ‰§è¡Œé¡ºåº

#### æµç¨‹å›¾

### å˜é‡

#### æ•°å­¦å…¬å¼å’Œç¨‹åº

#### ç¨‹åºå†…å˜é‡

### ç¨‹åº

```fortran 
subroutine convch,convcm
```

## 14.MICOM Mode - Diapycnal mixing : diapf3.f

![[3-HYCOM v2.0 User Manual##^0d6782]]

(![[MICOM Mode - Diapycnal mixing]])

### Formalism and numerical techniques

#### Turbulent diffusion

#### Turbulent heat flux

#### Numerical implentation

### Usage ä½¿ç”¨

åœ¨HYCOMv2.3ä¸­ï¼Œä»¥æ–‡ä»¶`diapfl.f90`çš„å½¢å¼å­˜åœ¨ï¼Œå…¶ä¸­çš„å­ç¨‹åºæœ‰ï¼šdiapf1ã€diapf2å’Œdiapf3ã€‚

#### æ‰§è¡Œé¡ºåº

#### æµç¨‹å›¾

![image.png|center|800](https://jsd.cdn.zzko.cn/gh/NEUQer-xing/Markdown_images@master/images-2/20230804001830.png)

### å˜é‡

#### å…¬å¼ä¸ç¨‹åº

#### ç¨‹åºå†…å˜é‡

### ç¨‹åº

```fortran
subroutine diapf3,diapf3j
```

## 15.Calculational grid

HYCOMå’ŒMICOMéƒ½ä½¿ç”¨â€œCâ€ç½‘æ ¼ï¼Œä½†ä½¿ç”¨ä¸åŒçš„æ°´å¹³ç½‘æ ¼ã€‚

åœ¨MICOMç½‘æ ¼ä¸­ï¼Œæ­£xæ–¹å‘æŒ‡å‘å—ï¼Œæ­£yæ–¹å‘æŒ‡å‘ä¸œã€‚

è€ŒHYCOMç½‘æ ¼è¢«è½¬æ¢ä¸ºæ ‡å‡†çš„ç¬›å¡å°”åæ ‡ç³»ï¼Œxè½´æŒ‡å‘ä¸œï¼Œyè½´æŒ‡å‘åŒ—ã€‚

ä¸‹å›¾å±•ç¤ºäº†HYCOMç½‘æ ¼çš„å‹åŠ›ï¼ˆPï¼‰ã€é€Ÿåº¦åˆ†é‡ï¼ˆUå’ŒVï¼‰å’Œæ¶¡åº¦ï¼ˆQï¼‰çš„ç½‘æ ¼ç‚¹ã€‚

è¯¥ç¤ºä¾‹ä¸º7x7çš„å‹åŠ›ç½‘æ ¼ç‚¹ã€‚å…¶ä»–å˜é‡çš„ç½‘æ ¼ç‚¹ä¸º8x8ã€‚åœ¨æ­¤æƒ…å†µä¸‹ï¼Œæ‰€æœ‰åœºé‡çš„ç»´åº¦éƒ½æ˜¯8x8ï¼Œç¬¬å…«è¡Œå’Œç¬¬å…«åˆ—å¯¹äºå‹åŠ›ç½‘æ ¼ç‚¹ä¸Šçš„å˜é‡æ˜¯æœªä½¿ç”¨çš„ã€‚

## 16.Boundary conditions in HYCOM

HYCOM 2.0.01å…·æœ‰ä¸¤ç§è¾¹ç•Œæ¡ä»¶:
- æµ·ç»µå±‚ç‰›é¡¿æ¾å¼›
- å®Œå…¨å¼€æ”¾æµ·æ´‹è¾¹ç•Œæ¡ä»¶

### Relaxation Boundary Conditions

### Open Boundary Conditions

#### No distinction between inflow and outflow boundaries

#### Well-posed boundary conditions

#### Barotropic and baroclinic velocities

Barotropic velocitiesï¼ˆç­‰å‹é€Ÿåº¦ï¼‰å’Œbaroclinic velocitiesï¼ˆæ–œå‹é€Ÿåº¦ï¼‰æ˜¯æè¿°æµ·æ´‹æ°´ä½“è¿åŠ¨çš„ä¸¤ç§å¸¸ç”¨é€Ÿåº¦åœºç±»å‹ã€‚

ç­‰å‹é€Ÿåº¦æŒ‡çš„æ˜¯ä¸æ·±åº¦æˆ–å¯†åº¦å‚ç›´å˜åŒ–æ— å…³çš„æ°´å¹³é€Ÿåº¦ã€‚æ¢å¥è¯è¯´ï¼Œæ•´ä¸ªæ°´æŸ±ä½œä¸ºä¸€ä¸ªæ•´ä½“ä¸€èµ·è¿åŠ¨ï¼Œé€Ÿåº¦åœ¨æ·±åº¦ä¸Šæ²¡æœ‰æ˜æ˜¾çš„å˜åŒ–ã€‚ç­‰å‹é€Ÿåº¦é€šå¸¸ä¸å¤§å°ºåº¦ã€ä½é¢‘è¿åŠ¨ç›¸å…³ï¼Œå¦‚æ´‹æµæˆ–ä¸»è¦æµ·æ´‹ç¯æµã€‚

å¦ä¸€æ–¹é¢ï¼Œæ–œå‹é€Ÿåº¦æè¿°çš„æ˜¯éšæ·±åº¦å˜åŒ–è€Œå˜åŒ–çš„æ°´å¹³é€Ÿåº¦ï¼Œè¿™æ˜¯ç”±äºæ°´æŸ±ä¸­çš„å¯†åº¦æ¢¯åº¦å¼•èµ·çš„ã€‚è¿™äº›é€Ÿåº¦ä¸å¯†åº¦çš„å‚ç›´å˜åŒ–ç›¸å…³ï¼Œåœ¨å¯†åº¦æ¢¯åº¦å¼ºçƒˆçš„åŒºåŸŸï¼Œå¦‚é”‹åŒºæˆ–ä¸Šå‡å’Œä¸‹æ²‰åŒºåŸŸï¼Œé€šå¸¸ä¼šå‡ºç°æ–œå‹é€Ÿåº¦ã€‚æ–œå‹é€Ÿåº¦å¯¹äºç†è§£æµ·æ´‹ä¸­çš„å‚ç›´å’Œæ°´å¹³ç¯æµæ¨¡å¼éå¸¸é‡è¦ï¼Œé€šå¸¸ä¸è¾ƒå°å°ºåº¦ã€é«˜é¢‘è¿åŠ¨ç›¸å…³ã€‚

æ€»ä½“è€Œè¨€ï¼Œç­‰å‹é€Ÿåº¦å’Œæ–œå‹é€Ÿåº¦çš„åŒºåˆ†æœ‰åŠ©äºæè¿°ä¸åŒç±»å‹çš„æµ·æ´‹æµåŠ¨ï¼Œå¹¶ç†è§£æµ·æ´‹ç¯æµçš„åŠ¨åŠ›å­¦è¿‡ç¨‹ã€‚

## 17.Equation of state and Related Issues

### Equation of state

### Cabbeling

### Thermobaric compressiblity

### Usage

#### æ‰§è¡Œé¡ºåº

## 18.Sub-programs

å­ç¨‹åºçš„å«ä¹‰

### Functions

### Initialization Subroutines

#### blkdat.f 

- blkdat : åˆå§‹åŒ–å…¬å…±å˜é‡
- blkinrï¼šåœ¨99å·å•å…ƒè¯»å…¥ä¸€ä¸ªå®æ•°
- blkini ï¼šåœ¨99å·å•å…ƒè¯»å…¥ä¸€ä¸ªæ•´æ•°
- blkinl ï¼šåœ¨99å·å•å…ƒè¯»å…¥ä¸€ä¸ªé€»è¾‘æ•°å­—
#### inicon.f

- iniconï¼šå°†æ‰€æœ‰çš„åˆå§‹å€¼éƒ½è®¾ç½®ä¸º0

#### inikpp.f

- inikpp ï¼šåˆå§‹åŒ– Largeï¼ŒMc.Williamsï¼ŒDoney KPP å‚ç›´æ··åˆæ–¹æ¡ˆã€‚

### Bathymetry Subroutines

#### bigrid.f 

- bigrid ï¼šç¡®å®šè¾¹ç•Œï¼Œç”¨äºç¡®å®šè¾¹ç•Œç½‘æ ¼çš„å››ä¸ªç‚¹ã€‚

- indxiï¼Œindxjï¼šç¡®å®šä¸é™†åœ°/æµ·æ´‹æ©ç ç›¸å¯¹åº”çš„i/j**å¾ªç¯ç´¢å¼•**ã€‚

#### geopar.f

- geopar ï¼šè®¾ç½®ä¸åœ°ç†ç›¸å…³çš„æ¨¡å‹å‚æ•°ã€‚

### Main HYCOM Subroutines

#### barotp.f

- barotpï¼šä»æ–œå‹æ—¶é—´æ°´å¹³-mæ¨è¿›ç­‰å‹æ–¹ç¨‹è‡³æ°´å¹³-nã€‚ Advance barotropic equations from baroclinic time level -mto level -n-.

#### cnuity.f

- cnuityï¼šè¿ç»­æ€§æ–¹ç¨‹ï¼ˆä¿®æ­£é€šé‡è¾“è¿ç‰ˆæœ¬ï¼‰ã€‚

#### convec.f

- convchï¼šå¯¹æµè°ƒæ•´ã€‚
- convcmï¼šå°†æ¯”æ··åˆå±‚æ°´è½»çš„æ°´å¼•å…¥æ··åˆå±‚ã€‚

#### diapfl.f

- diapf1ï¼šKPPé£æ ¼çš„éšå¼å†…éƒ¨diapycnal mixingã€‚
- diapf1ajï¼š
- diapf1bjï¼š
- diapf1aijï¼šdiapycnal mixingï¼Œå•ä¸ªiã€jç‚¹ï¼ˆéƒ¨åˆ†Aï¼‰ã€‚
- diapf1uijï¼šdiapycnal mixingï¼Œå•ä¸ªiã€jç‚¹ï¼ŒåŠ¨é‡åœ¨uç½‘æ ¼ç‚¹ã€‚
- diapf1vijï¼šdiapycnal mixingï¼Œå•ä¸ªiã€jç‚¹ï¼ŒåŠ¨é‡åœ¨vç½‘æ ¼ç‚¹ã€‚
#### diapfl.f

- diapf2ï¼šMICOMé£æ ¼çš„æ˜¾å¼å†…éƒ¨æ··åˆï¼ˆç”¨äºæ··åˆåæ ‡ï¼‰ã€‚

- diapf2j: diapycnal mixingæ··åˆï¼Œå•ä¸ªjè¡Œã€‚

- diapf3:MICOMé£æ ¼çš„æ˜¾å¼å†…éƒ¨æ··åˆï¼ˆç”¨äºç­‰å¯†åº¦åæ ‡ï¼‰ã€‚

- diapf3j: diapycnal mixingæ··åˆï¼Œå•ä¸ªjè¡Œã€‚
#### hybgen.f

- hybgen:æ··åˆç½‘æ ¼ç”Ÿæˆå™¨ã€‚

- hybgenaj:æ··åˆç½‘æ ¼ç”Ÿæˆå™¨ï¼Œå•ä¸ªjè¡Œï¼ˆéƒ¨åˆ†Aï¼‰ã€‚

- hybgenbj:æ··åˆç½‘æ ¼ç”Ÿæˆå™¨ï¼Œå•ä¸ªjè¡Œï¼ˆéƒ¨åˆ†Bï¼‰ã€‚
#### icloan.f

- icloan:"èƒ½é‡è´·æ¬¾"å†°æ¨¡å‹ã€‚æ— å¹³æµï¼Œæ— åŠ¨åŠ›å­¦ã€‚
#### latbdp.f

- latbdp:å°†è¾¹ç•Œæ¡ä»¶åº”ç”¨äºç­‰å‹æµåœºã€‚
#### momtum.f

- momtum:åŠ¨é‡æ–¹ç¨‹ã€‚
#### mxkpp.f

- mxkpp:å¤§è§„æ¨¡ã€Mc.Williamsã€Doney KPPå‚ç›´æ‰©æ•£ã€‚
- mxkppaj:è®¡ç®—ç²˜åº¦å’Œæ‰©æ•£æ€§ã€‚
- mxkppbj:åœ¨pç‚¹è¿›è¡Œæœ€ç»ˆæ··åˆã€‚
- mxkppcj:åœ¨uã€vç‚¹è¿›è¡Œæœ€ç»ˆé€Ÿåº¦æ··åˆã€‚
- mxkppaij:KPPå‚ç›´æ‰©æ•£ï¼Œå•ä¸ªjè¡Œï¼ˆéƒ¨åˆ†Aï¼‰ã€‚
- mxkppbij:KPPå‚ç›´æ‰©æ•£ï¼Œå•ä¸ªjè¡Œï¼ˆéƒ¨åˆ†Bï¼‰ã€‚åœ¨pç‚¹æ‰§è¡Œæœ€ç»ˆçš„å‚ç›´æ··åˆã€‚
- mxkppcij:
- mxkppcijv:
- wscale:

#### mxkrt.f

- mxkrta:
- mxkrtaaj:
- mxkrtabj:
- mxkrtbaj:
- mxkrtbbj:

#### mxkrtm.f

- mxkrtm:
- mxkrtmaj:
- mxkrtmbj:

#### thermf.f
- thermf
- thermfj

#### tsadvc.f
- advem
- tsadvc

### Atmospheric Forcing Subroutines

å¤§æ°”é©±åŠ¨å­ç¨‹åº

#### dpthuv.f 

- dpthuv 
#### drudyv.f

- dpudpv 
- dpudpvi
- rdmonth 
- rdpall 
- rdpall1
- rdforf 
- rdrlax
#### forfun.f

- forday
- fortuna 
- forfunh 
- forfunr


### Matrix Inversion Subroutines 

çŸ©é˜µæ±‚é€†å­ç¨‹åº

#### matinv.f

- tridcof

- tridrhs

- tridmat

### Communication Subroutines

å„ä¸ªæ¨¡å—é—´è¿›è¡Œé€šä¿¡å­ç¨‹åº

| File | Subroutine | Description |
|------|------------|-------------|
| mod\_xc\_mp.f | xcaget | Converts an entire 2-D array from tiled to non-tiled layout. |
| mod\_xc\_mp.f | xcaput | Converts an entire 2-D array from non-tiled to tiled layout. |
| mod\_xc\_mp.f | xceget | Finds the value of a (ia,ja) on the non-tiled 2-D grid. |
| mod\_xc\_mp.f | xceput | Fills a single element in the non-tiled 2-D grid. |
| mod\_xc\_mp.f | xchalt | Emergency stops all processes, called by one process. |
| mod\_xc\_mp.f | xclget | Extracts a line of elements from the non-tiled 2-D grid. |
| mod\_xc\_mp.f | xclput | Fills a line of elements in the non-tiled 2-D grid. |
| mod\_xc\_mp.f | xemaxr_0 | Replaces a scalar a with its element-wise maximum over all tiles. |
| mod\_xc\_mp.f | xemaxr_1 | Replaces an array a with its element-wise maximum over all tiles. |
| mod\_xc\_mp.f | xcminr_0 | Replaces a scalar a with its element-wise minimum over all tiles. |
| mod\_xc\_mp.f | xeminr_1 | Replaces an array a with its element-wise minimum over all tiles. |
| mod\_xc\_mp.f | xespmd | Initializes data structures that identify the tiles. |
| mod\_xc\_mp.f | xcstop | Stops all processes, called by all processes. |
| mod\_xc\_mp.f | Xesum | Sums a 2-D array, where mask = 1. |
| mod\_xc\_mp.f | xcsumj | Row-sum of a 2-D array, where mask = 1, on first processor only. |
| mod\_xc\_mp.f | xcsync | Barrier, no processor exits until all arrive (and flush stdout). |
| mod\_xc\_mp.f | xetbar | Provides synchronization with processors ipel and ipe2. |
| mod\_xc\_mp.f | xctilr | Updates the tile overlap halo of a 3-D real array. |
| mod\_xc\_mp.f | xetmri | Initializes timers. |
| mod\_xc\_mp.f | xctmr0 | Starts timer n. |
| mod\_xc\_mp.f | xctmri | Adds time since call to xctim0 to timer n. |
| mod\_xc\_mp.f | xctmrn | Registers name of timer n. |
| mod\_xc\_mp.f | xctmrp |Prints all active timers|
| mod\_xc\_sm.f|       |This file contains the shared memory version of all the subroutines in mod_xc_mp.|


### Machine Dependent I/O Subroutines

æœºå™¨ç‹¬ç«‹IOå­ç¨‹åº

![image.png|center](https://jsd.cdn.zzko.cn/gh/NEUQer-xing/Markdown_images@master/images-2/20230804020453.png)


### Pipe Comparison Subroutines

ç®¡é“å¯¹æ¯”å­ç¨‹åº

![image.png|center](https://jsd.cdn.zzko.cn/gh/NEUQer-xing/Markdown_images@master/images-2/20230804020530.png)

### Diagnostic Output Subroutines

è¯Šæ–­è¾“å‡ºå­ç¨‹åº

![image.png|center](https://jsd.cdn.zzko.cn/gh/NEUQer-xing/Markdown_images@master/images-2/20230804020547.png)


### Plotting Subroutines

ç»˜å›¾å­ç¨‹åº

![image.png|center](https://jsd.cdn.zzko.cn/gh/NEUQer-xing/Markdown_images@master/images-2/20230804020558.png)



































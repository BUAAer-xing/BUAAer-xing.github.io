# 阅读笔记

## 动机和措施

### Motivation

科技进步使得求解问题的规模不断增大，应用问题模的模型结构越来越复杂，对计算精度的要求也在日益提高，而其精细模拟可以达到的**问题规模却严重受制于计算机体系结构和求解算法的可扩展性**。

本文作者阐述了在科学工程应用的实际问题中，所涉及的三个领域----数理模型、数值求解方法、体系结构。而作者指出数理模型和数值求解方法的相互作用已经到达了相对系统的研究阶段，而**数值方法和体系结构的相互作用还在起步阶段**，并指出**实现三个领域之间的交叉与耦合是设计和实现高效数值计算算法的重点**。

因此，本文的作者立足现实，想基于**计算机体系结构和数值方法的耦合**，对大规模线性问题的迭代求解算法高校可扩展性问题进行研究。以此来设计出高可扩展性以及对典型实际应用问题具有良好求解性能的算法和架构。

### Solution

作者指出，大规模线性问题的迭代并行算法，其**高可扩展性瓶颈主要体现在全局通信开销和全局通信频次上**。因此作者决定利用**降低基准通信开销**的方法来实现高可扩展性。而降低基准通信开销就意味着**需要选取通信极小化的处理器分组、矩阵分块**的策略。

作者进行优化的思想是：如果数值算法能够获得并行计算机体系结构自身存在的分层聚类的空间分布非均衡信息，然后据此信息来指导求解算法进行系数矩阵的分块策略，可能会降低基准通信开销。

作者基于舒尔补（Schur-complement）方法来对矩阵进行分块处理，从而实现基于区域分解的并行计算，降低其通信开销。随后，使用Petal-剖分方法，对超算的节点分布进行聚类分组操作，对矩阵，同样使用Petal-剖分方法，也得到相应的分块矩阵。从而使得超算处理器网络关联图的通信开销能够达到近似优化的量级。

## 引言部分

### 三个领域

在科学工程应用的实际问题当中，数理模型、数值方法、体系结构等领域具有自身的特点：**特定的分层耦合和非均衡性**
- 数理模型
	- 在纵向上呈现出多尺度的分层耦合特性
	- 在横向上长线出非线性系数在空间分布上的非均衡特性
- 超级计算机上的大规模数值求值方法：
	- 在纵向上呈现出**非线性-线性-预处理-迭代循环**的分层耦合特性
	- 在横向上呈现出非均匀扭曲、自适应加密等导致的网格离散在空间分布上的非均衡特性
- 体系结构-异构的硬件系统：
	- 在纵向上呈现出**系统-超节点-节点-核**的分层耦合特性
	- 在横向上呈现出CPU核连接通图的权重在空间分布上的非均衡特性

三个领域（数理模型、数值求值方法、体系结构）的分层耦合与空间非均衡性，为发展高可扩展性数值计算算法带来了挑战和机遇。
- **数理模型与数值方法**相互作用
	- 体现在计算物理与计算数学的交叉上。
	- 达到了相对系统的研究阶段
- **数值方法和体系结构**相互作用
- **数理模型和体系结构**相互作用

三个领域之间的交叉和耦合是设计和实现数值计算算法的重点

### 文章研究方面

本文基于<font color="##c00000">计算机体系结构</font>和<font color="##c00000">数值方法</font>的耦合，对大规模线性问题的迭代求解算法高扩展性问题进行研究。

#### 计算机体系结构

对于超级计算机体系结构，特点体现为大规模、多层和异构。

CPU核之间的通信性能并不相等，其中节点内CPU核紧密耦合，超节点形成强连通分量，而超节点间是相对松散的弱连通。

通信网络表现为非完全图特性，在几何拓扑上构成带权重的连通图。

硬件平台异构特性导致的应用程序网格剖分、处理器剖分、处理器核映像、负载均衡等优化问题，这就可以归结为体系结构关联图的特定剖分问题，从而得到合理的解决。

#### 大规模数值求解方法

对应的矩阵结构需要考虑网格离散导致的空间非均衡性。

在引入矩阵重排序、把系数矩阵视为宏观上的分块矩阵后，主对角分块代表了输入的局地节点、非对角分块的元素代表了输入节点之间的关联或相互作用。

在这个视角下，矩阵的结构与图结构形成了一一对应的关系。矩阵的对角分块对应着图的超节点，矩阵的非对角元素对应着超节点的边和权重，这样能够针对其形成权重关联图。

### 主要瓶颈

大规模线性问题的迭代并行算法，其高可扩展性瓶颈，主要体现在全局通信开销和全局通信频次上。
- **基准通信开销**：（也就是每个迭代步的通信开销）与逆矩阵的非零元个数成正比
- **全局通信频次**：与处理器群组构成的连通子图之间的割边数量成正比
- 算法所需要的总迭代步数，与逼近精度相关
- 算法的总体计算开销，与预处理系统的近似求解的计算代价密切相关


#### 实现高可扩展性的三种途径

- 降低求解器的整体迭代次数
	- 需要选取高逼近精度的预条件子
- 降低基准通信开销
	- 选取通信极小化的处理器分组、矩阵分块策略
- 改进Krylov子空间迭代算法

#### 文章主要思路

如果数值算法能够获得并行计算机体系结构自身存在的分层聚类的空间分布非均衡信息，然后据此信息来指导求解算法进行系数矩阵的分块策略，可以获得提高。

基于区域分解的并行计算，其通信开销可以下降1-2个数量级，这会带来并行计算可扩展性的明显提升。

提出高可扩展性的线性问题求解架构（Schur-KS），该架构是基于**Petal-剖分**和**舒尔补方法**而设计的。


## 基于Petal剖分的大尺度聚类分组算法

剖分子集之间的割边集小，意味着全局通信的代价低廉。

本文设计的高可扩展性的求解架构，其并行部分是分级进行的。

1. 第一级是大尺度的聚类分组
	- 将现有的空闲处理器资源分解为若干个处理器群组（clusters），将现有的计算区域分解为若干个计算子区域
	- 第一级的聚类分组不需要做负载均衡上的考虑，它所要实现的是**聚类分组的通信极小化**
	- 而**通信极小化问题在第一级剖分中对算法整体的可扩展性影响最大**，应该作为唯一的约束，进行剖分算法的近似优化，
1. 第二级是中小尺度级别的并行分解
	- 在每个处理器群组和计算子区域的内部，进行中小粒度的处理器分组和计算区域的分解。
	- 在足够多的未知量和处理器的情况下，**负载均衡问题**应该放在第二级剖分中进行实现。












"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[1489],{2740:(e,n,l)=>{l.r(n),l.d(n,{assets:()=>s,contentTitle:()=>r,default:()=>d,frontMatter:()=>c,metadata:()=>t,toc:()=>o});var i=l(5893),a=l(1151);const c={authors:{name:"BUAAer-xing",title:"\u5317\u822aHPC\u7855\u58eb\u751f",url:"https://github.com/BUAAer-xing",image_url:"https://cdn.jsdelivr.net/gh/NEUQer-xing/Markdown_images@master/images-2/icon.png"}},r="Makefile\u7b80\u5355\u5165\u95e8",t={permalink:"/blog/Makefile\u7b80\u5355\u5165\u95e8",editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/blog/Makefile\u7b80\u5355\u5165\u95e8.md",source:"@site/blog/Makefile\u7b80\u5355\u5165\u95e8.md",title:"Makefile\u7b80\u5355\u5165\u95e8",description:"\u8bfe\u7a0b\u6765\u6e90\uff1a\u4e8e\u4ed5\u742a\u6559\u6388\uff1aMakefile 20\u5206\u949f\u5165\u95e8\uff0c\u7b80\u7b80\u5355\u5355\uff0c\u5c55\u793a\u5982\u4f55\u4f7f\u7528Makefile\u7ba1\u7406\u548c\u7f16\u8bd1C++\u4ee3\u7801",date:"2024-01-06T10:21:45.000Z",tags:[],readingTime:3.18,hasTruncateMarker:!1,authors:[{name:"BUAAer-xing",title:"\u5317\u822aHPC\u7855\u58eb\u751f",url:"https://github.com/BUAAer-xing",image_url:"https://cdn.jsdelivr.net/gh/NEUQer-xing/Markdown_images@master/images-2/icon.png",imageURL:"https://cdn.jsdelivr.net/gh/NEUQer-xing/Markdown_images@master/images-2/icon.png"}],frontMatter:{authors:{name:"BUAAer-xing",title:"\u5317\u822aHPC\u7855\u58eb\u751f",url:"https://github.com/BUAAer-xing",image_url:"https://cdn.jsdelivr.net/gh/NEUQer-xing/Markdown_images@master/images-2/icon.png",imageURL:"https://cdn.jsdelivr.net/gh/NEUQer-xing/Markdown_images@master/images-2/icon.png"}},unlisted:!1,prevItem:{title:"Cmake\u7b80\u5355\u5165\u95e8",permalink:"/blog/Cmake\u7b80\u5355\u5165\u95e8"},nextItem:{title:"Ubantu\u8f6f\u4ef6\u7ba1\u7406\u547d\u4ee4",permalink:"/blog/ubantu\u7684\u8f6f\u4ef6\u7ba1\u7406\u547d\u4ee4"}},s={authorsImageUrls:[void 0]},o=[{value:"\u64cd\u4f5c\u73af\u5883",id:"\u64cd\u4f5c\u73af\u5883",level:2},{value:"\u524d\u63d0\u51c6\u5907",id:"\u524d\u63d0\u51c6\u5907",level:2},{value:"\u65b0\u5efa\u6587\u4ef6\u5939",id:"\u65b0\u5efa\u6587\u4ef6\u5939",level:3},{value:"\u65b0\u5efa\u4e09\u4e2acpp\u6587\u4ef6\u548c\u4e00\u4e2a\u5934\u6587\u4ef6",id:"\u65b0\u5efa\u4e09\u4e2acpp\u6587\u4ef6\u548c\u4e00\u4e2a\u5934\u6587\u4ef6",level:3},{value:"\u4e0d\u4f7f\u7528makefile\u8fdb\u884c\u7f16\u8bd1\u94fe\u63a5\u64cd\u4f5c",id:"\u4e0d\u4f7f\u7528makefile\u8fdb\u884c\u7f16\u8bd1\u94fe\u63a5\u64cd\u4f5c",level:2},{value:"\u521b\u5efaMakefile\u6587\u4ef6 \uff08\u7248\u672c\u4e00\uff09",id:"\u521b\u5efamakefile\u6587\u4ef6-\u7248\u672c\u4e00",level:2},{value:"\u521b\u5efaMakefile\u6587\u4ef6\uff08\u7248\u672c\u4e8c\uff09",id:"\u521b\u5efamakefile\u6587\u4ef6\u7248\u672c\u4e8c",level:2},{value:"\u521b\u5efaMakefile\u6587\u4ef6\uff08\u7248\u672c\u4e09\uff09",id:"\u521b\u5efamakefile\u6587\u4ef6\u7248\u672c\u4e09",level:2},{value:"\u521b\u5efaMakefile\u6587\u4ef6\uff08\u7248\u672c\u56db\uff09",id:"\u521b\u5efamakefile\u6587\u4ef6\u7248\u672c\u56db",level:2}];function p(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",img:"img",p:"p",pre:"pre",...(0,a.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(n.p,{children:["\u8bfe\u7a0b\u6765\u6e90\uff1a",(0,i.jsx)(n.a,{href:"https://www.bilibili.com/video/BV188411L7d2/",children:"\u4e8e\u4ed5\u742a\u6559\u6388\uff1aMakefile 20\u5206\u949f\u5165\u95e8\uff0c\u7b80\u7b80\u5355\u5355\uff0c\u5c55\u793a\u5982\u4f55\u4f7f\u7528Makefile\u7ba1\u7406\u548c\u7f16\u8bd1C++\u4ee3\u7801"})]}),"\n",(0,i.jsx)("iframe",{src:"https://player.bilibili.com/player.html?bvid=BV188411L7d2",scrolling:"no",frameborder:"no",framespacing:"0",allowfullscreen:"true",width:"100%",height:"500px"}),"\n",(0,i.jsx)(n.h2,{id:"\u64cd\u4f5c\u73af\u5883",children:"\u64cd\u4f5c\u73af\u5883"}),"\n",(0,i.jsx)(n.p,{children:"Macos+Vscode"}),"\n",(0,i.jsx)(n.h2,{id:"\u524d\u63d0\u51c6\u5907",children:"\u524d\u63d0\u51c6\u5907"}),"\n",(0,i.jsx)(n.h3,{id:"\u65b0\u5efa\u6587\u4ef6\u5939",children:"\u65b0\u5efa\u6587\u4ef6\u5939"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:"mkdir learn_makefile\n"})}),"\n",(0,i.jsx)(n.h3,{id:"\u65b0\u5efa\u4e09\u4e2acpp\u6587\u4ef6\u548c\u4e00\u4e2a\u5934\u6587\u4ef6",children:"\u65b0\u5efa\u4e09\u4e2acpp\u6587\u4ef6\u548c\u4e00\u4e2a\u5934\u6587\u4ef6"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-cpp",children:'// mian.cpp\n#include <iostream>\n#include "functions.h"\nusing namespace std;\nint main()\n{\n    printhello();\n    cout << "This is main:" << endl;\n    cout << "The factorial of 5 is: " << factorial(5) << endl;\n    return 0;\n}\n'})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-cpp",children:'// factorial.cpp\n#include "functions.h"\nint factorial(int n)\n{\n    if(n == 1)\n        return 1;\n    else\n        return n * factorial(n-1);\n}\n'})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-cpp",children:'// printhello.cpp\n#include <iostream>\n#include "functions.h"\nusing namespace std;\nvoid printhello()\n{\n    cout << "Hello world" << endl;\n}\n'})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-cpp",children:"// function.h\n#ifndef _FUNCTIONS_H_\n#define _FUNCTIONS_H_\nvoid printhello();\nint factorial(int n);\n#endif\n"})}),"\n",(0,i.jsx)(n.h2,{id:"\u4e0d\u4f7f\u7528makefile\u8fdb\u884c\u7f16\u8bd1\u94fe\u63a5\u64cd\u4f5c",children:"\u4e0d\u4f7f\u7528makefile\u8fdb\u884c\u7f16\u8bd1\u94fe\u63a5\u64cd\u4f5c"}),"\n",(0,i.jsx)(n.p,{children:"\u8fdb\u5165learn_makefile\u6587\u4ef6\u5939\u4e0b\u8fdb\u884c\u64cd\u4f5c"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:"g++ main.cpp factorial.cpp printhello.cpp -o main\n./main\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{src:"https://cdn.jsdelivr.net/gh/NEUQer-xing/Markdown_images@master/images-2/20231106195030.png",alt:"image.png|left|600"})}),"\n",(0,i.jsx)(n.h2,{id:"\u521b\u5efamakefile\u6587\u4ef6-\u7248\u672c\u4e00",children:"\u521b\u5efaMakefile\u6587\u4ef6 \uff08\u7248\u672c\u4e00\uff09"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-cmake",children:"# Makefile\u6587\u4ef6\n\n# VERSION 1\n# hello\u4e3a\u751f\u6210\u7684\u53ef\u6267\u884c\u6587\u4ef6\uff0c\u4f9d\u8d56\u4e8e\u540e\u9762\u7684\u4e09\u4e2a.cpp\u6587\u4ef6\n# g++\u524d\u9762\u52a0\u4e00\u4e2aTAB\u7684\u7a7a\u683c\nhello: main.cpp printhello.cpp factorial.cpp\n\tg++ -o hello main.cpp printhello.cpp factorial.cpp\n"})}),"\n",(0,i.jsxs)(n.p,{children:["\u5728learn_makefile\u6587\u4ef6\u5939\u4e0b\uff0c\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a",(0,i.jsx)("font",{color:"#c00000",children:"makefile\u6587\u4ef6\u7684\u4f7f\u7528\u65b9\u6cd5"})]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:"make\n./hello\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{src:"https://cdn.jsdelivr.net/gh/NEUQer-xing/Markdown_images@master/images-2/20231106200629.png",alt:"image.png|left|600"})}),"\n",(0,i.jsx)(n.h2,{id:"\u521b\u5efamakefile\u6587\u4ef6\u7248\u672c\u4e8c",children:"\u521b\u5efaMakefile\u6587\u4ef6\uff08\u7248\u672c\u4e8c\uff09"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-cmake",children:"# VERSION 2\nCXX = g++\nTARGET = hello\nOBJ = main.o printhello.o factorial.o\n# make\u65f6\u6267\u884cg++ \u5148\u627eTARGET\uff0cTARGET\u4e0d\u5b58\u5728\u627eOBJ\uff0cOBJ\u4e0d\u5b58\u5728\uff0c\u7f16\u8bd1\u4e09\u4e2a.cpp\u6587\u4ef6\u751f\u6210.o\u6587\u4ef6\n# \u7136\u540e\u518d\u7f16\u8bd1OBJ\u6587\u4ef6\uff0c\u751f\u6210\u53ef\u6267\u884c\u6587\u4ef6hello\n$(TARGET): $(OBJ)\n\t$(CXX) -o $(TARGET) $(OBJ)\n# main.o\u8fd9\u6837\u6765\u7684\uff0c\u7f16\u8bd1main.cpp\u751f\u6210\nmain.o: main.cpp\n\t$(CXX) -c main.cpp\nprinthello.o: printhello.cpp\n\t$(CXX) -c printhello.cpp\nfactorial.o: factorial.cpp\n\t$(CXX) -c factorial.cpp\n"})}),"\n",(0,i.jsx)(n.h2,{id:"\u521b\u5efamakefile\u6587\u4ef6\u7248\u672c\u4e09",children:"\u521b\u5efaMakefile\u6587\u4ef6\uff08\u7248\u672c\u4e09\uff09"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-cmake",children:"# VERSION 3\nCXX = g++\nTARGET = hello\nOBJ = main.o printhello.o factorial.o\n \n# \u7f16\u8bd1\u9009\u9879\uff0c\u663e\u793a\u6240\u6709\u7684warning\nCXXLAGS = -c -Wall\n \n# $@\u8868\u793a\u7684\u5c31\u662f\u5192\u53f7\u524d\u9762\u7684TARGET\uff0c$^\u8868\u793a\u7684\u662f\u5192\u53f7\u540eOBJ\u7684\u5168\u90e8.o\u4f9d\u8d56\u6587\u4ef6\n$(TARGET): $(OBJ)\n\t$(CXX) -o $@ $^\n \n# $<\u8868\u793a\u6307\u5411%.cpp\u4f9d\u8d56\u7684\u7b2c\u4e00\u4e2a\uff0c\u4f46\u662f\u8fd9\u91cc\u4f9d\u8d56\u53ea\u6709\u4e00\u4e2a\n# $@\u8868\u793a\u6307\u5411%.o\n%.o: %.cpp\n\t$(CXX) $(CXXLAGS) $< -o $@\n \n# \u4e3a\u4e86\u9632\u6b62\u6587\u4ef6\u5939\u4e2d\u5b58\u5728\u4e00\u4e2a\u6587\u4ef6\u53ebclean\n.PHONY: clean\n \n# -f\u8868\u793a\u5f3a\u5236\u5220\u9664\uff0c\u6b64\u5904\u8868\u793a\u5220\u9664\u6240\u6709\u7684.o\u6587\u4ef6\u548cTARGET\u6587\u4ef6\nclean:\n\trm -f *.o $(TARGET)\n"})}),"\n",(0,i.jsx)(n.h2,{id:"\u521b\u5efamakefile\u6587\u4ef6\u7248\u672c\u56db",children:"\u521b\u5efaMakefile\u6587\u4ef6\uff08\u7248\u672c\u56db\uff09"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-cmake",children:"# VERSION 4\nCXX = g++\nTARGET = hello\n# \u6240\u6709\u5f53\u524d\u76ee\u5f55\u7684.cpp\u6587\u4ef6\u90fd\u653e\u5728SRC\u91cc\u9762\nSRC = $(wildcard *.cpp)\n# \u628aSRC\u91cc\u9762\u7684.cpp\u6587\u4ef6\u66ff\u6362\u4e3a.o\u6587\u4ef6\nOBJ = $(patsubst %.cpp, %.o,$(SRC))\n \nCXXLAGS = -c -Wall\n \n$(TARGET): $(OBJ)\n\t$(CXX) -o $@ $^\n \n%.o: %.cpp\n\t$(CXX) $(CXXLAGS) $< -o $@\n \n.PHONY: clean\nclean:\n\trm -f *.o $(TARGET)\n"})})]})}function d(e={}){const{wrapper:n}={...(0,a.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(p,{...e})}):p(e)}},1151:(e,n,l)=>{l.d(n,{Z:()=>t,a:()=>r});var i=l(7294);const a={},c=i.createContext(a);function r(e){const n=i.useContext(c);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:r(e.components),i.createElement(c.Provider,{value:n},e.children)}}}]);